(window.webpackJsonp=window.webpackJsonp||[]).push([["mollie-payments"],{TEcg:function(e,t,n){"use strict";n.r(t);n("wcNg");var o=n("FGIj");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i="application/json",a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;this.send("GET",e,null,t,n,o)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;this.send("POST",e,t,n,o,r)}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,c=new XMLHttpRequest;c.open(e,t),c.setRequestHeader("Content-Type",a),c.onload=function(){if(o&&"function"==typeof o){var e=c.getResponseHeader("content-type"),t="response"in c?c.response:c.responseText;e.indexOf("application/json")>-1?o(JSON.parse(t)):o(t)}},c.onerror=function(){r&&"function"==typeof o&&r()},c.send(n)}}])&&r(t.prototype,n),o&&r(t,o),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,y,h,v=function(e){function t(){return u(this,t),p(this,d(t).apply(this,arguments))}var n,o,r,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){var e=this,t=null,n=document.querySelector(this.getSelectors().mollieController);n&&n.remove(),this.client=new a,null!=this.options.shopUrl&&"/"===this.options.shopUrl.substr(-1)&&(this.options.shopUrl=this.options.shopUrl.substr(0,this.options.shopUrl.length-1));var o=document.querySelector(this.getSelectors().cardHolder),r=document.querySelector(this.getSelectors().componentsContainer),i=document.querySelector(this.getSelectors().paymentForm),c=document.querySelectorAll(this.getSelectors().radioInputs),s=document.querySelector(this.getSelectors().submitButton);r&&o&&(t=Mollie(this.options.profileId,{locale:this.options.locale,testmode:this.options.testMode})),this.createComponentsInputs(t,[this.getInputFields().cardHolder,this.getInputFields().cardNumber,this.getInputFields().expiryDate,this.getInputFields().verificationCode]),c.forEach((function(t){t.addEventListener("change",(function(){e.showComponents()}))})),s.addEventListener("click",(function(n){n.preventDefault(),e.submitForm(n,t,i)}))}},{key:"getSelectors",value:function(){return{cardHolder:"#cardHolder",componentsContainer:"div.mollie-components-credit-card",creditCardRadioInput:'#confirmPaymentForm input[type="radio"].creditcard',mollieController:"div.mollie-components-controller",paymentForm:"#confirmPaymentForm",radioInputs:'#confirmPaymentForm input[type="radio"]',submitButton:'#confirmPaymentForm button[type="submit"]'}}},{key:"getDefaultProperties",value:function(){return{styles:{base:{backgroundColor:"#fff",fontSize:"14px",padding:"10px 10px","::placeholder":{color:"rgba(68, 68, 68, 0.2)"}},valid:{color:"#090"},invalid:{backgroundColor:"#fff1f3"}}}}},{key:"getInputFields",value:function(){return{cardHolder:{name:"cardHolder",id:"#cardHolder",errors:"cardHolderError"},cardNumber:{name:"cardNumber",id:"#cardNumber",errors:"cardNumberError"},expiryDate:{name:"expiryDate",id:"#expiryDate",errors:"expiryDateError"},verificationCode:{name:"verificationCode",id:"#verificationCode",errors:"verificationCodeError"}}}},{key:"showComponents",value:function(){var e=document.querySelector(this.getSelectors().creditCardRadioInput),t=document.querySelector(this.getSelectors().componentsContainer);t&&(void 0===e||!1===e.checked?t.classList.add("d-none"):t.classList.remove("d-none"))}},{key:"createComponentsInputs",value:function(e,t){var n=this;t.forEach((function(t,o,r){var i=e.createComponent(t.name,n.getDefaultProperties());i.mount(t.id),r[o][t.name]=i,i.addEventListener("change",(function(e){var n=document.getElementById("".concat(t.name)),o=document.getElementById("".concat(t.errors));e.error&&e.touched?(n.classList.add("error"),o.textContent=e.error):(n.classList.remove("error"),o.textContent="")})),i.addEventListener("focus",(function(){n.setFocus("".concat(t.id),!0)})),i.addEventListener("blur",(function(){n.setFocus("".concat(t.id),!1)}))}))}},{key:"setFocus",value:function(e,t){document.querySelector(e).classList.toggle("is-focused",t)}},{key:"disableForm",value:function(){var e=document.querySelector(this.getSelectors().submitButton);e&&(e.disabled=!0)}},{key:"enableForm",value:function(){var e=document.querySelector(this.getSelectors().submitButton);e&&(e.disabled=!1)}},{key:"submitForm",value:(i=regeneratorRuntime.mark((function e(t,n,o){var r,i,a,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=this,this.disableForm(),null!=(i=document.querySelector(this.getSelectors().creditCardRadioInput))&&!1!==i.checked||!o||o.submit(),!i||!0!==i.checked){e.next=18;break}return(a=document.getElementById("".concat(this.getInputFields().verificationCode.errors))).textContent="",e.next=10,n.createToken();case 10:if(c=e.sent,s=c.token,!(u=c.error)){e.next=17;break}return this.enableForm(),a.textContent=u.message,e.abrupt("return");case 17:u||this.client.get(r.options.shopUrl+"/mollie/components/store-card-token/"+r.options.customerId+"/"+s,(function(){document.getElementById("cardToken").setAttribute("value",s),o.submit()}),(function(){o.submit()}),"application/json; charset=utf-8");case 18:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,o){var r=i.apply(e,t);function a(e){s(r,n,o,a,c,"next",e)}function c(e){s(r,n,o,a,c,"throw",e)}a(void 0)}))},function(e,t,n){return c.apply(this,arguments)})}])&&l(n.prototype,o),r&&l(n,r),t}(o.a);h={customerId:null,locale:null,profileId:null,shopUrl:null,testMode:!0},(y="options")in(m=v)?Object.defineProperty(m,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[y]=h;var b=n("gHbT"),g=n("41MI");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(){return w(this,t),E(this,k(t).apply(this,arguments))}var n,o,r,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){try{this._paymentForm=b.a.querySelector(document,this.getSelectors().paymentForm),this._confirmForm=b.a.querySelector(document,this.getSelectors().confirmForm),this._confirmFormButton=b.a.querySelector(this._confirmForm,this.getSelectors().confirmFormButton)}catch(e){return}this.client=new a,this._cleanUpExistingElement(),this._fixShopUrl(),this._initializeComponentInstance(),this._registerEvents()}},{key:"_cleanUpExistingElement",value:function(){var e=document.querySelector(this.getSelectors().mollieController);e&&e.remove()}},{key:"_fixShopUrl",value:function(){null!=this.options.shopUrl&&"/"===this.options.shopUrl.substr(-1)&&(this.options.shopUrl=this.options.shopUrl.substr(0,this.options.shopUrl.length-1))}},{key:"_initializeComponentInstance",value:function(){this._componentsObject=null;var e=document.querySelector(this.getSelectors().cardHolder);document.querySelector(this.getSelectors().componentsContainer)&&e&&(this._componentsObject=Mollie(this.options.profileId,{locale:this.options.locale,testmode:this.options.testMode})),this.createComponentsInputs()}},{key:"_registerEvents",value:function(){this._confirmForm.addEventListener("submit",this.submitForm.bind(this))}},{key:"_reactivateFormSubmit",value:function(){this._confirmFormButton.disabled=!1;var e=b.a.querySelector(this._confirmFormButton,".loader",!1);e&&e.remove()}},{key:"getSelectors",value:function(){return{cardHolder:"#cardHolder",componentsContainer:"div.mollie-components-credit-card",creditCardRadioInput:'#changePaymentForm input[type="radio"]',mollieController:"div.mollie-components-controller",paymentForm:"#changePaymentForm",confirmForm:"#confirmOrderForm",confirmFormButton:'#confirmOrderForm > button[type="submit"]'}}},{key:"getDefaultProperties",value:function(){return{styles:{base:{backgroundColor:"#fff",fontSize:"14px",padding:"10px 10px","::placeholder":{color:"rgba(68, 68, 68, 0.2)"}},valid:{color:"#090"},invalid:{backgroundColor:"#fff1f3"}}}}},{key:"getInputFields",value:function(){return{cardHolder:{name:"cardHolder",id:"#cardHolder",errors:"cardHolderError"},cardNumber:{name:"cardNumber",id:"#cardNumber",errors:"cardNumberError"},expiryDate:{name:"expiryDate",id:"#expiryDate",errors:"expiryDateError"},verificationCode:{name:"verificationCode",id:"#verificationCode",errors:"verificationCodeError"}}}},{key:"createComponentsInputs",value:function(){var e=this,t=this,n=[this.getInputFields().cardHolder,this.getInputFields().cardNumber,this.getInputFields().expiryDate,this.getInputFields().verificationCode];null!==this._componentsObject&&n.forEach((function(n,o,r){var i=e._componentsObject.createComponent(n.name,t.getDefaultProperties());i.mount(n.id),r[o][n.name]=i,i.addEventListener("change",(function(e){var t=document.getElementById("".concat(n.name)),o=document.getElementById("".concat(n.errors));e.error&&e.touched?(t.classList.add("error"),o.textContent=e.error):(t.classList.remove("error"),o.textContent="")})),i.addEventListener("focus",(function(){t.setFocus("".concat(n.id),!0)})),i.addEventListener("blur",(function(){t.setFocus("".concat(n.id),!1)}))}))}},{key:"setFocus",value:function(e,t){document.querySelector(e).classList.toggle("is-focused",t)}},{key:"submitForm",value:(i=regeneratorRuntime.mark((function e(t){var n,o,r,i,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,o=this._confirmForm,null!=(r=document.querySelector("".concat(this.getSelectors().creditCardRadioInput,'[value="').concat(this.options.paymentId,'"]')))&&!1!==r.checked||!this._confirmForm){e.next=5;break}return e.abrupt("return");case 5:if(!r||!1!==r.checked){e.next=7;break}return e.abrupt("return");case 7:return t.preventDefault(),(i=document.getElementById("".concat(this.getInputFields().verificationCode.errors))).textContent="",e.next=12,this._componentsObject.createToken();case 12:if(a=e.sent,c=a.token,!(s=a.error)){e.next=20;break}return i.textContent=s.message,this._reactivateFormSubmit(),i.scrollIntoView(),e.abrupt("return");case 20:this.client.get(n.options.shopUrl+"/mollie/components/store-card-token/"+n.options.customerId+"/"+c,(function(){n.continueShopwareCheckout(o)}),(function(){n.continueShopwareCheckout(o)}),"application/json; charset=utf-8");case 21:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,o){var r=i.apply(e,t);function a(e){_(r,n,o,a,c,"next",e)}function c(e){_(r,n,o,a,c,"throw",e)}a(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"continueShopwareCheckout",value:function(e){if(g.a.isIEBrowser()){var t=document.getElementById("tos");null!=t&&e.insertAdjacentElement("beforeend",(n="tos",o=t.checked,(r=document.createElement("input")).type="checkbox",r.name=n,r.checked=o,r.style.display="none",r))}var n,o,r;e.submit()}}])&&C(n.prototype,o),r&&C(n,r),t}(o.a);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){F(i,o,r,a,c,"next",e)}function c(e){F(i,o,r,a,c,"throw",e)}a(void 0)}))}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?D(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(I,"options",{paymentId:null,customerId:null,locale:null,profileId:null,shopUrl:null,testMode:!0});var R=function(e){function t(){var e,n;A(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return T(D(n=U(this,(e=q(t)).call.apply(e,[this].concat(r)))),"_shopUrl",""),T(D(n),"_customerId",""),T(D(n),"_isModalForm",!1),T(D(n),"_container",null),T(D(n),"_paymentForm",null),T(D(n),"_issuersDropdown",null),T(D(n),"_radioInputs",null),T(D(n),"_iDealRadioInput",null),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){this._container=document.querySelector("div.mollie-ideal-issuer"),void 0!==this._container&&null!==this._container&&(this.initControls(),null!==this._paymentForm&&null!==this._issuersDropdown&&(this.registerEvents(),this.updateIssuerVisibility(this._iDealRadioInput,this._container),this._isModalForm||this.updateIssuer(this._shopUrl,this._customerId,this._iDealRadioInput,this._issuersDropdown,(function(){}))))}},{key:"initControls",value:function(){this._shopUrl=this._container.getAttribute("data-shop-url"),"/"===this._shopUrl.substr(-1)&&(this._shopUrl=this._shopUrl.substr(0,this._shopUrl.length-1)),this._customerId=this._container.getAttribute("data-customer-id"),this._issuersDropdown=document.querySelector("#iDealIssuer");var e=document.querySelector("#confirmPaymentForm"),t=document.querySelector("#changePaymentForm");t?this._paymentForm=t:(this._isModalForm=!0,this._paymentForm=e),void 0!==this._paymentForm&&null!==this._paymentForm&&(this._radioInputs=this._paymentForm.querySelectorAll('input[type="radio"]'),this._iDealRadioInput=this._paymentForm.querySelector('input[type="radio"].ideal'))}},{key:"registerEvents",value:function(){var e=this;if(null!==this._paymentForm){var t=this._shopUrl,n=this._customerId,o=this._container,r=this._paymentForm,i=this._radioInputs,a=this._iDealRadioInput,c=this._issuersDropdown;i.forEach((function(t){t.addEventListener("change",(function(){e.updateIssuerVisibility(a,o)}))})),this._isModalForm?r.querySelector('button[type="submit"]').addEventListener("click",j(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.updateIssuer(t,n,a,c,(function(){}));case 1:case"end":return o.stop()}}),o)})))):c.addEventListener("change",j(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.updateIssuer(t,n,a,c,(function(){}));case 1:case"end":return o.stop()}}),o)}))))}}},{key:"updateIssuerVisibility",value:function(e,t){void 0===e||!1===e.checked?t.classList.add("d-none"):t.classList.remove("d-none")}},{key:"updateIssuer",value:function(e,t,n,o,r){void 0!==n?null!==n?!1!==n.checked?void 0!==o?null!==o?(new a).get(e+"/mollie/ideal/store-issuer/"+t+"/"+o.value,(function(){r("issuer updated successfully")}),(function(){r("error when updating issuer")}),"application/json; charset=utf-8"):r("iDEAL issuers not found"):r("iDEAL issuers not defined"):r("iDEAL payment not active"):r("iDEAL Radio Input not found"):r("iDEAL Radio Input not defined")}}])&&x(n.prototype,o),r&&x(n,r),t}(o.a);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function H(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?V(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){function t(){var e,n;N(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return G(V(n=H(this,(e=J(t)).call.apply(e,[this].concat(r)))),"APPLE_PAY_VERSION",3),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){var e=this;e.client=new a;var t=document.querySelectorAll(".js-apple-pay-container"),n=document.querySelectorAll(".js-apple-pay");if(window.ApplePaySession&&window.ApplePaySession.canMakePayments()){if(!(n.length<=0)){var o=n[0],r=e.getShopUrl(o);e.client.get(r+"/mollie/apple-pay/available",(function(t){void 0!==t.available&&!1!==t.available&&n.forEach((function(t){t.classList.remove("d-none"),t.removeEventListener("click",e.onButtonClick.bind(e)),t.addEventListener("click",e.onButtonClick.bind(e))}))}))}}else if(t)for(var i=0;i<t.length;i++)t[i].style.display="none"}},{key:"onButtonClick",value:function(e){e.preventDefault();var t=this,n=e.target,o=n.parentNode,r=t.getShopUrl(n),i=o.querySelector('input[name="id"]').value,a=o.querySelector('input[name="countryCode"]').value,c=o.querySelector('input[name="currency"]').value,s=1,u=document.getElementsByClassName("product-detail-quantity-select");u.length>0&&(s=u[0].value),t.addProductToCart(i,s,r),t.createApplePaySession(a,c,r).begin()}},{key:"addProductToCart",value:function(e,t,n){this.client.post(n+"/mollie/apple-pay/add-product",JSON.stringify({id:e,quantity:t}))}},{key:"createApplePaySession",value:function(e,t,n){var o=this,r={countryCode:e,currencyCode:t,requiredShippingContactFields:["name","email","postalAddress"],supportedNetworks:["amex","maestro","masterCard","visa","vPay"],merchantCapabilities:["supports3DS"],total:{label:"",amount:0}},i=new ApplePaySession(this.APPLE_PAY_VERSION,r);return i.onvalidatemerchant=function(e){o.client.post(n+"/mollie/apple-pay/validate",JSON.stringify({validationUrl:e.validationURL}),(function(e){var t=JSON.parse(e.session);i.completeMerchantValidation(t)}),(function(){i.abort()}))},i.onshippingcontactselected=function(e){var t="";void 0!==e.shippingContact.countryCode&&(t=e.shippingContact.countryCode),o.client.post(n+"/mollie/apple-pay/shipping-methods",JSON.stringify({countryCode:t}),(function(e){e.success?i.completeShippingContactSelection(ApplePaySession.STATUS_SUCCESS,e.shippingmethods,e.cart.total,e.cart.items):i.completeShippingContactSelection(ApplePaySession.STATUS_FAILURE,[],{label:"",amount:0,pending:!0},[])}),(function(){i.abort()}))},i.onshippingmethodselected=function(e){o.client.post(n+"/mollie/apple-pay/set-shipping",JSON.stringify({identifier:e.shippingMethod.identifier}),(function(e){e.success?i.completeShippingMethodSelection(ApplePaySession.STATUS_SUCCESS,e.cart.total,e.cart.items):i.completeShippingMethodSelection(ApplePaySession.STATUS_FAILURE,{label:"",amount:0,pending:!0},[])}),(function(){i.abort()}))},i.onpaymentauthorized=function(e){var t=e.payment.token;t=JSON.stringify(t),i.completePayment(ApplePaySession.STATUS_SUCCESS),o.finishPayment(n+"/mollie/apple-pay/start-payment",t,e.payment)},i.oncancel=function(){o.client.post(n+"/mollie/apple-pay/restore-cart")},i}},{key:"finishPayment",value:function(e,t,n){var o=function(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n},r=document.createElement("form");r.action=e,r.method="POST",r.insertAdjacentElement("beforeend",o("email",n.shippingContact.emailAddress)),r.insertAdjacentElement("beforeend",o("lastname",n.shippingContact.familyName)),r.insertAdjacentElement("beforeend",o("firstname",n.shippingContact.givenName)),r.insertAdjacentElement("beforeend",o("street",n.shippingContact.addressLines[0])),r.insertAdjacentElement("beforeend",o("postalCode",n.shippingContact.postalCode)),r.insertAdjacentElement("beforeend",o("city",n.shippingContact.locality)),r.insertAdjacentElement("beforeend",o("countryCode",n.shippingContact.countryCode)),r.insertAdjacentElement("beforeend",o("paymentToken",t)),document.body.insertAdjacentElement("beforeend",r),r.submit()}},{key:"getShopUrl",value:function(e){var t=b.a.getDataAttribute(e,"data-shop-url");return"/"===t.substr(-1)&&(t=t.substr(0,t.length-1)),t}}])&&B(n.prototype,o),r&&B(n,r),t}(o.a);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(){return K(this,t),W(this,Z(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){var e=this,t=this.options.hideAlways,n=this.getShopUrl();!t&&window.ApplePaySession&&window.ApplePaySession.canMakePayments()||(this.hideApplePay(".payment-method-input.applepay"),(new a).get(n+"/mollie/apple-pay/applepay-id",(function(t){e.hideApplePay("#paymentMethod"+t.id)})))}},{key:"hideApplePay",value:function(e){var t=document.querySelector(e),n=this.getClosest(t,".payment-method");n&&n.classList&&n.remove()}},{key:"getShopUrl",value:function(){var e=this.options.shopUrl;if(void 0===e)return"";for(;"/"===e.substr(-1);)e=e.substr(0,e.length-1);return e}},{key:"getClosest",value:function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}}])&&Q(n.prototype,o),r&&Q(n,r),t}(o.a),te=window.PluginManager;te.register("MollieApplePayDirect",Y),te.register("MollieIDealIssuer",R),te.register("MollieApplePayPaymentMethod",ee,"[data-mollie-template-applepay-account]"),te.register("MollieApplePayPaymentMethod",ee,"[data-mollie-template-applepay-checkout]"),te.register("MollieCreditCardComponents",v,"[data-mollie-template-creditcard-components]"),te.register("MollieCreditCardComponentsSw64",I,"[data-mollie-template-creditcard-components-sw64]")}},[["TEcg","runtime","vendor-node","vendor-shared"]]]);