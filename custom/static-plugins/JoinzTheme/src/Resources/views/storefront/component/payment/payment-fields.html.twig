{% block component_payment_methods %}
    <script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"
    ></script>
    <div class="grid-x grid-margin-x">
        {% for payment in page.paymentMethods %}
            <div class="cell medium-6">
                <div class="field-group">
                    {% block component_payment_method_input %}
                        <input type="radio"
                               onclick="submitForm('paymentMethod{{ loop.index }}');"
                               id="paymentMethod{{ loop.index }}"
                               name="paymentMethodId"
                               value="{{ payment.id }}"
                               {% if payment.id is same as(defaultPaymentMethodId) %}checked="checked"{% endif %}
                               class="form-radio-sm custom-control-input payment-method-input">
                    {% endblock %}
                        {% block component_payment_method_label %}
                            <label class="custom-control-label payment-method-label"
                                   for="paymentMethod{{ loop.index }}">
                                {% block component_payment_method_image %}
                                    {% if payment.media %}
                                        {% sw_thumbnails 'payment-method-image-thumbnails' with {
                                            media: payment.media,
                                            sizes: {
                                                'default': '100px'
                                            },
                                            attributes: {
                                                'class': 'payment-method-image',
                                                'alt': (payment.media.translated.alt ?: payment.translated.name),
                                                'title': (payment.media.translated.title ?: payment.translated.name)
                                            }
                                        } %}
                                    {% endif %}
                                {% endblock %}

                                {% block component_payment_method_description %}
                                <span>{{ payment.translated.name }}</span>
                                {% endblock %}
                            </label>
                        {% endblock %}

                </div>
            </div>

        {% endfor %}


    </div>
   <script>
       var $j = jQuery.noConflict();
        function submitForm(selectedId) {
            var form = $j('#confirmPaymentForm');
            var url = form.attr('action');
            var data = form.serialize();

            $j.ajax({
                type: "POST",
                url: url,
                data: data,
                success: function(response) {
                    $j('#'+selectedId).prop('checked', true);
                },
                error: function(xhr, textStatus, errorThrown) {
                    console.log('Error:', errorThrown);
                }
            });
        }
    </script>
{% endblock %}
